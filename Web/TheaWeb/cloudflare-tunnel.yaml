# Cloudflare Tunnel Configuration for TheaWeb
# This allows secure external access to the local Thea API without exposing ports
#
# Setup:
# 1. Install cloudflared: brew install cloudflare/cloudflare/cloudflared
# 2. Login: cloudflared tunnel login
# 3. Create tunnel: cloudflared tunnel create thea-api
# 4. Add DNS: cloudflared tunnel route dns thea-api api.theathe.app
# 5. Run: cloudflared tunnel run thea-api
#
# For production, run as a service:
# sudo cloudflared service install

tunnel: thea-api
credentials-file: ~/.cloudflared/thea-api.json

ingress:
  # API endpoint
  - hostname: api.theathe.app
    service: http://localhost:8080
    originRequest:
      connectTimeout: 30s
      noTLSVerify: false
      keepAliveConnections: 10
      keepAliveTimeout: 30s
      httpHostHeader: api.theathe.app

  # Health check endpoint
  - hostname: api.theathe.app
    path: /health
    service: http://localhost:8080

  # Catch-all (required)
  - service: http_status:404

# Warp routing (optional - for private network access)
# warp-routing:
#   enabled: true
