# Thea Launch Flow - App launch and initial state verification
appId: app.thea.ios
---
- launchApp:
    clearState: true
    permissions:
      all: allow

# Wait for app UI to fully settle after fresh install
- waitForAnimationToEnd

# Screenshot immediately after launch — DIAGNOSTIC: capture whatever is on screen
- takeScreenshot: debug_1_after_wait

# Dismiss any system alert (e.g. "Running in Temporary Mode" from ModelContainer fallback)
- tapOn:
    text: "Continue"
    optional: true

# Verify home screen — WelcomeView always shown on fresh install (no conversations after clearState)
# Asserts by accessibilityIdentifier on the greeting VStack (reliable, unaffected by time-of-day text)
- assertVisible:
    id: "welcome-greeting"

- takeScreenshot: launch_initial_state

# Verify tab bar items — use title text (accessibilityIdentifier on Tab view does not
# propagate to UITabBarButton; the title string is the reliable selector on iOS 26)
- assertVisible:
    text: "Chat"
    optional: true

- assertVisible:
    text: "Settings"
    optional: true

- takeScreenshot: launch_tabs_visible

# DIAGNOSTIC: verify flow completed (if this screenshot is present in artifacts, the flow ran through)
- takeScreenshot: debug_2_flow_complete
